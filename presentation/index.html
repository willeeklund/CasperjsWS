<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>CasperJS Workshop</title>
		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/default.css" id="theme">
		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">
		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>
		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>
	<body>
		<div class="reveal">
<style type="text/css">
.present {
	/*margin-top: -130px!important;*/
}
</style>
<!-- Any section element inside of this container is displayed as a slide -->
<div class="slides">
  <!-- PAGE 1 - INTRODUCTION -->
  <section>
	  <div style="display: block; min-height: 130px; margin-bottom: 40px;">
	    <img src="img/ccell_digital_media.png" style="float:left; width: 100px; height: 100px; margin-right: 40px;">
	    <h2 style="float:left; margin-top: 40px;">CasperJS workshop</h2>
	  </div>

    <div style="float:left;margin-left: 50px">
      <h3>Albin Carnstam</h3>
      <img src="img/alca.jpg" height="150px"/>
      <p>C</p>
    </div>
    <div style="float:right;margin-right: 50px">
      <h3>Wilhelm Eklund</h3>
      <img src="img/wiek.jpg" height="150px"/>
      <p>C</p>
    </div>
  </section>

  <!-- PAGE 2 - WHAT WILL YOU LEARN TODAY? -->
  <section>
    <section>
      <h2>What is the challenge?</h2>
    </section>
    <section>
      <h3>Demo</h3>
    </section>
    <section>
      <h3>Discuss!</h3>
	  <h3>How are you testing your code?</h3>
    </section>
  </section>

  <section>
    <section>
      <h2>Benefits of automated testing</h2>
    </section>
    <section>
      <h3>Demo</h3>
    </section>
  </section>

  <section>
    <section>
      <h2>What is our current situation?</h2>
      <div class="fragment">
        <img src="img/aftonbladet24.png" style="border: 0">
        <img src="img/arbetsformedlingen.png" style="border: 0">
      </div>
    </section>
  </section>

  <section>
    <section>
      <h2>What is CasperJS?</h2>
    </section>

    <section>
      <img src="img/terminal.png" style="border: 0">
    </section>
  </section>

  <section>
    <section>
      <h2>What can you do with it?</h2>
      <ul>
        <li class="fragment">Browser testing</li>
        <li class="fragment">Unit testing</li>
        <li class="fragment">Automation / scraping</li>
      </ul>
    </section>
  </section>

  <section>
    <section>
      <h2>Pros / cons</h2>
    </section>

    <section>
      <table><tr>
        <td>
          <h1 style="font-size: 3.5em;">+</h1>
          <ul>
            <li>Easy to get started!</li>
            <li>Good API</li>
            <li>Pure JavaScript!</li>
            <li>Fast (headless browser)</li>
            <li>Both Phantom.js and Slimer.js (Chrome, Safari, Firefox)</li>
            <li>Can be used from node.js (using spooky.js)</li>
          </ul>
        </td>
        <td style="padding-left: 80px;">
          <h1 style="font-size: 5em;">-</h1>
          <ul>
            <li>Not 100% same behaviour as Chrome (<span style="color:#f8f">Qt</span>Webkit engine)</li>
            <li>Can not test IE specific bugs</li>
            <li>Hard to test Flash based components</li>
          </ul>
        </td>
      </tr></table>
    </section>
  </section>

  <section>
    <section>
      <h2>Other tools</h2>
    </section>

    <section>
      <h2>Selenium</h2>
      <ul class="fragment">
        <li>Industry de facto standard</li>
        <li>Virtual machines with browsers</li>
        <li>Can test all versions of IE</li>
        <li>More work to get started</li>
        <li>Supports many programming languages</li>
      </ul>
    </section>
  </section>

  <section>
    <section>
      <h2>Can you use it at your client?</h2>
    </section>
    <section>
      <h3>Discuss!</h3>
	  <h3>How can you implement automated testing at your client?</h3>
    </section>
  </section>

  <section>
    <section>
      <h2>Code introduction & examples</h2>
    </section>

    <section>
      <h2>CasperJS API</h2>
    </section>

    <section>
      <h2>start, then & run</h2>
      <pre><code>
casper.test.begin("Test suite for aftonbladet.se", function suite(test) {
  casper.start("http://www.aftonbladet.se", function () {
    // Perform something at this page
  });
  casper.then(function () {
    // Next step
  });
  casper.run(function () {
    // Last part. This actually starts the scenario
    test.done();
  });
});
      </code></pre>
    </section>

    <section>
      <h2>Add testing steps</h2>
      <pre><code>
casper.test.begin('Test suite for aftonbladet.se', function suite(test) {
  casper.start('http://www.aftonbladet.se', function () {
    test.assertUrlMatch(/^http:\/\/www\.aftonbladet\.se\/$/, 'Frontpage loaded');
    test.assertVisible('.abSiteNav', 'Navigation element exists');
  });
  casper.then(function () {
    test.assertSelectorHasText('.abSiteNav', 'Sport', 'Sport section in nav');
  });
  casper.run(function () {
    test.done();
  });
});
      </code></pre>
    </section>

    <section>
      <h2>Evaluate code in loaded page</h2>
      <pre><code>
  casper.then(function () {
    var nbrArticles = casper.evaluate(function () {
      return document.querySelectorAll('.abBlock').length;
    });
    test.info('Number of articles: ' + nbrArticles);
    test.assert(nbrArticles > 100, 'Hundreds of articles are shown');
  });
      </code></pre>
    </section>

    <section>
      <h2>Fill in forms</h2>
      <pre><code>
<form action="/contact" id="contact-form">
  <input type="text" name="name"/>
  <input type="file" name="attachment"/>
  <input type="radio" name="civility" value="Mr"/> Mr
  <input type="radio" name="civility" value="Mrs"/> Mrs
  <input type="submit"/>
</form>
      </code></pre>

      <pre><code>
casper.start('http://some.tld/contact.form', function() {
    casper.fill('form#contact-form', {
        'name':       'Chuck Norris',
        'civility':   'Mr',
        'attachment': '/Users/chuck/roundhousekick.doc'
    }, true);
});
      </code></pre>
    </section>

    <section>
      <h2>Take screenshots</h2>
      <pre><code>
  casper.then(function () {
    casper.capture('abse_frontpage.png');
    casper.captureSelector('abse_navigation.png', '.abSiteNav');
  });
      </code></pre>
    </section>

    <section>
      <h2>Fill in forms</h2>
      <pre><code>
<form action="/contact" id="contact-form">
  <input type="text" name="name"/>
  <input type="file" name="attachment"/>
  <input type="radio" name="civility" value="Mr"/> Mr
  <input type="radio" name="civility" value="Mrs"/> Mrs
  <input type="submit"/>
</form>
      </code></pre>

      <pre><code>
casper.start('http://some.tld/contact.form', function() {
    casper.fill('form#contact-form', {
        'name':       'Chuck Norris',
        'civility':   'Mr',
        'attachment': '/Users/chuck/roundhousekick.doc'
    }, true);
});
      </code></pre>
    </section>

  </section>

</div>
		</div>
		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>
		<script>
			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,
				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none
				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',
				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});
		</script>
	</body>
</html>
